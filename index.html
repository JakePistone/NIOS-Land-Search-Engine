<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>National IOS Land Search</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
</head>
<body class="bg-gray-100 font-sans">
    <!-- Header Section -->
    <header class="bg-blue-900 text-white py-6 shadow-lg">
        <div class="container mx-auto text-center">
            <h1 class="text-4xl font-bold tracking-tight">National IOS Land Search</h1>
            <p class="mt-2 text-lg">Find the perfect land for your next project</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto py-12 px-4">
        <section class="bg-white rounded-lg shadow-xl p-8 max-w-2xl mx-auto">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6 text-center">Search for Your Ideal Land</h2>
            <form id="landSearchForm" class="space-y-6">
                <!-- Acres Input -->
                <div>
                    <label for="acres" class="block text-sm font-medium text-gray-700">Desired Acres</label>
                    <div class="flex space-x-2">
                        <input
                            type="number"
                            id="acres"
                            name="acres"
                            min="0"
                            step="0.01"
                            placeholder="Enter acres (e.g., 5.25)"
                            class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                        >
                        <select
                            id="acresOption"
                            name="acresOption"
                            class="mt-1 px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                        >
                            <option value="exact">Exact</option>
                            <option value="plus10">Exact +10 acres</option>
                            <option value="anyAbove">Any above</option>
                        </select>
                    </div>
                </div>

                <!-- Square Footage Input -->
                <div>
                    <label for="squareFootage" class="block text-sm font-medium text-gray-700">Planned Building Square Footage</label>
                    <input
                        type="number"
                        id="squareFootage"
                        name="squareFootage"
                        min="0"
                        placeholder="Enter square footage (e.g., 10000)"
                        class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    >
                </div>

                <!-- Market Search Inputs -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Market Locations</label>
                    <div id="marketsContainer">
                        <div class="market-field">
                            <input
                                type="text"
                                name="markets[]"
                                placeholder="Enter city or region (e.g., Austin, TX)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                            >
                        </div>
                    </div>
                    <button
                        type="button"
                        id="addMarket"
                        class="mt-2 text-blue-600 hover:text-blue-800 font-medium text-sm"
                    >
                        + Add Another Market
                    </button>
                </div>

                <!-- Zoning Input -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Zoning Type</label>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input
                                type="checkbox"
                                id="zoningIndustrial"
                                name="zoning[]"
                                value="Industrial"
                                class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            >
                            <label for="zoningIndustrial" class="ml-2 text-sm text-gray-700">Industrial</label>
                        </div>
                        <div class="flex items-center">
                            <input
                                type="checkbox"
                                id="zoningCommercial"
                                name="zoning[]"
                                value="Commercial"
                                class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            >
                            <label for="zoningCommercial" class="ml-2 text-sm text-gray-700">Commercial</label>
                        </div>
                        <div class="flex items-center">
                            <input
                                type="checkbox"
                                id="zoningManufacturing"
                                name="zoning[]"
                                value="Manufacturing"
                                class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            >
                            <label for="zoningManufacturing" class="ml-2 text-sm text-gray-700">Manufacturing</label>
                        </div>
                    </div>
                </div>

                <!-- Tenant Input -->
                <div>
                    <label for="tenant" class="block text-sm font-medium text-gray-700">Tenant</label>
                    <input
                        type="text"
                        id="tenant"
                        name="tenant"
                        placeholder="Enter tenant (e.g., Company Name)"
                        class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    >
                </div>

                <!-- Buttons -->
                <div class="text-center flex justify-center space-x-4">
                    <button
                        type="submit"
                        class="inline-block bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 transition duration-300"
                    >
                        Search Land
                    </button>
                    <button
                        type="button"
                        id="clearForm"
                        class="inline-block bg-red-600 text-white px-6 py-3 rounded-md font-medium hover:bg-red-700 transition duration-300"
                    >
                        Clear
                    </button>
                </div>
            </form>
        </section>
    </main>

    <!-- Property Map Button -->
    <div class="fixed bottom-4 right-4">
        <a href="https://jakepistone.github.io/NIOS-Land-Map/" class="bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 transition duration-300">
            Click For Property Map
        </a>
    </div>

    <!-- Footer Section -->
    <footer class="bg-blue-900 text-white py-6 mt-12">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 National IOS Land Search. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Function to initialize autocomplete on an input
        function initAutocomplete(input) {
            $(input).autocomplete({
                source: function(request, response) {
                    $.ajax({
                        url: "http://gd.geobytes.com/AutoCompleteCity",
                        dataType: "jsonp",
                        data: {
                            filter: "US",
                            q: request.term
                        },
                        success: function(data) {
                            if (data && data.length && data[0] !== "%LOCATION%") {
                                // Remove ", US" from each suggestion
                                const formattedData = data.map(item => item.replace(", US", ""));
                                response(formattedData);
                            } else {
                                response([]);
                            }
                        }
                    });
                },
                minLength: 2 // Start suggesting after 2 characters
            });
        }

        // Clear localStorage on page load to ensure fresh form
        document.addEventListener('DOMContentLoaded', () => {
            localStorage.removeItem('landSearchForm'); // Clear saved form data

            const marketsContainer = document.getElementById('marketsContainer');
            // Initialize autocomplete on the default market input
            const defaultInput = marketsContainer.querySelector('input[name="markets[]"]');
            initAutocomplete(defaultInput);

            // Add event listener for remove market buttons
            marketsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('removeMarket')) {
                    e.target.parentElement.remove();
                }
            });

            // Clear form button event listener
            document.getElementById('clearForm').addEventListener('click', () => {
                const form = document.getElementById('landSearchForm');
                form.reset(); // Reset all form inputs
                // Clear market fields except the first one
                const marketFields = marketsContainer.querySelectorAll('.market-field');
                marketFields.forEach((field, index) => {
                    if (index > 0) field.remove();
                });
                // Clear the first market input
                marketsContainer.querySelector('input[name="markets[]"]').value = '';
                localStorage.removeItem('landSearchForm'); // Clear localStorage
            });
        });

        // Add market input field
        document.getElementById('addMarket').addEventListener('click', () => {
            const marketsContainer = document.get NIOS-Land-Map/") {
                window.location.href = "https://jakepistone.github.io/NIOS-Land-Map/";
            });
        </script>
    </body>
    </html>
